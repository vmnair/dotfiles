#!/bin/bash

# tmux setup for learning Lua


if ! tmux  has-session -t Readwise 2>/dev/null;
then

# Neovim 
tmux new-session -s Readwise -n Neovim -d
tmux send-keys -t Readwise 'cd ~/dotfiles/neovim/nvim/lua/vinod' C-m
tmux send-keys -t Readwise 'vim readwise.lua' C-m


# Create horizontal split and start claude code
tmux split-window -h -t Readwise:1
tmux send-keys -t Readwise:1.2 'cd ~/dotfiles/neovim/nvim/' C-m
tmux send-keys -t Readwise:1.3  'clear' C-m
tmux send-keys -t Readwise:1.2 'claude' C-m


# Console Window
tmux new-window -n Console -t Readwise
tmux send-keys -t Readwise:2  'cd ~/dotfiles/neovim/nvim' C-m
tmux send-keys -t Readwise:2  'clear' C-m


# Lazygit
tmux new-window -n Lazygit -t Readwise
tmux send-keys -t Readwise:3  'cd ~/dotfiles/neovim/nvim' C-m
tmux send-keys -t Readwise:3  'lazygit' C-m
tmux send-keys -t Readwise:3  'clear' C-m

# Select the Neovim window
tmux select-window -t Readwise:1
tmux select-pane -t Readwise:1.1
fi

# Attach or switch to session
if [ -n "$TMUX" ]; then
    tmux switch-client -t Readwise
else
    tmux attach -t Readwise
fi



